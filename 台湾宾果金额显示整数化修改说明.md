# å°æ¹¾å®¾æœé‡‘é¢æ˜¾ç¤ºæ•´æ•°åŒ–ä¿®æ”¹è¯´æ˜

## ä¿®æ”¹æ—¥æœŸ
2026-01-09

## ä¿®æ”¹ç›®çš„
å°†å°æ¹¾å®¾æœèŠå¤©å®¤ä¸­æ‰€æœ‰é‡‘é¢æ˜¾ç¤ºæ”¹ä¸ºæ•´æ•°ï¼ŒåŒ…æ‹¬ï¼š
- å‰ç«¯é¡µé¢çš„ç©å®¶åˆ†æ•°ã€ä¸­å¥–åå•
- åç«¯ç”Ÿæˆçš„èŠå¤©æ¶ˆæ¯ï¼ˆç©å®¶åˆ†æ•°æŠ¥å‘Šã€ä¸­å¥–åå•ï¼‰
- æˆ¿ä¸»ç®¡ç†ä¸­å¿ƒçš„ç»Ÿè®¡æ•°æ®

ä¸æ˜¾ç¤ºå°æ•°éƒ¨åˆ†ï¼Œä½†ä¸å½±å“åå°è®¡ç®—é€»è¾‘ã€‚

---

## ä¿®æ”¹æ–‡ä»¶æ¸…å•

### å‰ç«¯æ–‡ä»¶ï¼ˆVue/Uni-appï¼‰
1. `/www/wwwroot/chsgappV2/copage/chat.vue` - èŠå¤©å®¤é¡µé¢ï¼ˆä¼šå‘˜å’Œæˆ¿ä¸»å…±ç”¨ï¼‰
2. `/www/wwwroot/chsgappV2/agent/manage/center.vue` - æˆ¿ä¸»ç®¡ç†ä¸­å¿ƒé¡µé¢

### åç«¯æ–‡ä»¶ï¼ˆPHP/Laravelï¼‰
3. `/www/wwwroot/chsgadmin/app/Common/TaskSwoole/CommonQueue.php` - èŠå¤©æ¶ˆæ¯ç”Ÿæˆé˜Ÿåˆ—

---

## ä¸€ã€èŠå¤©å®¤é¡µé¢ä¿®æ”¹ (copage/chat.vue)

### 1. å‰ç«¯æ¨¡æ¿æ˜¾ç¤ºéƒ¨åˆ†ï¼ˆä½¿ç”¨ Math.floor() è¿›è¡Œæ•´æ•°åŒ–æ˜¾ç¤ºï¼‰

#### 1.1 ç©å®¶ä½™é¢ä¿¡æ¯ï¼ˆç¬¬16-31è¡Œï¼‰
```vue
<!-- ä½™é¢ -->
<view class="text2 span1">{{ Math.floor(balanceInfo.kmoney) }}</view>

<!-- è¾“èµ¢ -->
<view class="text2 span1" :class="balanceInfo.sy > 0 ? 'green' : (balanceInfo.sy < 0 ? 'red' : '')">
  {{ Math.floor(balanceInfo.sy) }}
</view>

<!-- æµæ°´ -->
<view class="text2 span1">{{ Math.floor(balanceInfo.jetotal) }}</view>

<!-- é€€æ°´ -->
<view class="text2 span1">{{ Math.floor(balanceInfo.backWater) }}</view>
```

#### 1.2 æ³¨å•åˆ—è¡¨æ˜¾ç¤ºï¼ˆç¬¬672è¡Œã€ç¬¬686è¡Œï¼‰
```vue
<!-- è®¢å•æ€»é‡‘é¢ -->
<text class="tmoney">é‡‘é¢ï¼š{{ Math.floor(item.totalMoney) }}</text>

<!-- è®¢å•ç›ˆäº -->
<view v-if="order.isSettle" class="text" :class="order.winLose > 0 ? 'green' : (order.winLose < 0 ? 'red' : '')">
  {{ order.winLose > 0 ? "+"+Math.floor(order.winLose) : Math.floor(order.winLose) }}
</view>
```

#### 1.3 åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ï¼ˆç¬¬748è¡Œï¼‰
```vue
<!-- åœ¨çº¿ç”¨æˆ·ä½™é¢ -->
<view class="online-user-td">{{ Math.floor(user.kmoney) }}</view>
```

#### 1.4 æ¶ˆæ¯è®¢å•è¯¦æƒ…ï¼ˆç¬¬653-657è¡Œï¼‰
```vue
<!-- ä¸‹æ³¨é‡‘é¢ -->
<view class="h-td"><text class="text">{{ Math.floor(it.a) }}</text></view>

<!-- ç›ˆäºæ˜¾ç¤º -->
<text class="text" v-if="it.y > 0" style="color: green;">+{{ Math.floor(it.y) }}</text>
<text class="text" v-if="it.y < 0" style="color: red;">{{ Math.floor(it.y) }}</text>
<text class="text" v-if="it.y == 0">{{ Math.floor(it.y) }}</text>
```

### 2. æ•°æ®å¤„ç†éƒ¨åˆ†ï¼ˆåœ¨æ•°æ®åŠ è½½æ—¶è¿›è¡Œæ•´æ•°åŒ–å¤„ç†ï¼‰

#### 2.1 è·å–ä½™é¢ä¿¡æ¯ï¼ˆçº¦ç¬¬2084-2096è¡Œï¼‰
```javascript
// è·å–ä½™é¢ä¿¡æ¯
onGetBalanceInfo(data) {
  this.safeExecute(() => {
    // å°†é‡‘é¢æ•°æ®è½¬æ¢ä¸ºæ•´æ•°æ˜¾ç¤º
    const balanceData = data.data;
    if (balanceData) {
      if (balanceData.kmoney !== undefined) balanceData.kmoney = Math.floor(balanceData.kmoney);
      if (balanceData.sy !== undefined) balanceData.sy = Math.floor(balanceData.sy);
      if (balanceData.jetotal !== undefined) balanceData.jetotal = Math.floor(balanceData.jetotal);
      if (balanceData.backWater !== undefined) balanceData.backWater = Math.floor(balanceData.backWater);
    }
    this.balanceInfo = balanceData;
  });
},
```

#### 2.2 æ³¨å•åˆ—è¡¨åŠ è½½ï¼ˆçº¦ç¬¬3343-3377è¡Œï¼‰
```javascript
betRecordTop() {
  this.$u.api.member.getBetsSumByLotteryId({gid:this.gid}).then(res => {
    if(res.data.length <= 0){
      this.$u.toast("æš‚æ— æ•°æ®");
    }else{
      // å¤„ç†æ³¨å•åˆ—è¡¨é‡‘é¢ä¸ºæ•´æ•°
      const processedData = res.data.map(item => ({
        ...item,
        totalMoney: Math.floor(item.totalMoney || 0),
        winLose: Math.floor(item.winLose || 0)
      }));
      this.periodOrderList = processedData;
      this.betRecordShow = !this.betRecordShow;
    }
  }).catch(err => {});
},
```

#### 2.3 åœ¨çº¿ç”¨æˆ·åˆ—è¡¨åŠ è½½ï¼ˆçº¦ç¬¬2229-2255è¡Œï¼‰
```javascript
// åŠ è½½åœ¨çº¿ç”¨æˆ·åˆ—è¡¨
loadOnlineUserList() {
  // ... çœç•¥éƒ¨åˆ†ä»£ç  ...
  this.$u.api.agent.getOnlineUserList({gid: this.gid}).then(res => {
    if (res.data && Array.isArray(res.data)) {
      // å¤„ç†åœ¨çº¿ç”¨æˆ·ä½™é¢ä¸ºæ•´æ•°
      this.onlineUserList = res.data.map(user => ({
        ...user,
        kmoney: Math.floor(user.kmoney || 0)
      }));
    }
  });
},
```

#### 2.4 æ¶ˆæ¯è®¢å•è¯¦æƒ…ï¼ˆçº¦ç¬¬3643-3655è¡Œï¼‰
```javascript
msgOrderDetail(item,orderShowTtype){
  this.orderShowTtype = orderShowTtype;
  this.msgOrderDetailShow = true;
  // å¤„ç†è®¢å•è¯¦æƒ…é‡‘é¢ä¸ºæ•´æ•°
  if (Array.isArray(item)) {
    this.msgOrderList = item.map(order => ({
      ...order,
      a: Math.floor(order.a || 0),
      y: Math.floor(order.y || 0)
    }));
  } else {
    this.msgOrderList = item;
  }
},
```

---

## äºŒã€æˆ¿ä¸»ç®¡ç†ä¸­å¿ƒé¡µé¢ä¿®æ”¹ (agent/manage/center.vue)

### 1. å‰ç«¯æ¨¡æ¿æ˜¾ç¤ºéƒ¨åˆ†

#### 1.1 ç”¨æˆ·ä½™é¢å’Œç™¾èƒœå¸ï¼ˆç¬¬31-41è¡Œï¼‰
```vue
<view class="balance-container">
  <view class="balance-item">
    <text class="balance-amount">{{ Math.floor(info.balance || 0) }}</text>
    <text class="balance-label">ç”¨æˆ·ä½™é¢</text>
  </view>
  <view class="balance-separator"></view>
  <view class="balance-item">
    <text class="balance-amount">{{ Math.floor(info.bsb_coin || 0) }}</text>
    <text class="balance-label">ç™¾èƒœå¸</text>
  </view>
</view>
```

#### 1.2 ç»Ÿè®¡æ•°æ®ï¼ˆç¬¬44-60è¡Œï¼‰
```vue
<view class="section-div-4">
  <view class="section-div-4-1">
    <text class="text">{{ Math.floor(info.totalMoney || 0) }}</text>
    <text>ä»Šæ—¥æµæ°´</text>
  </view>
  <view class="section-div-4-1">
    <text class="text">{{ Math.floor(info.sy || 0) }}</text>
    <text>ä»Šæ—¥ç›ˆäº</text>
  </view>
  <!-- ...å…¶ä»–ç»Ÿè®¡é¡¹... -->
</view>
```

### 2. æ•°æ®å¤„ç†éƒ¨åˆ†ï¼ˆç¬¬142-155è¡Œï¼‰

```javascript
getCenterInfo(){
  this.$u.api.agent.getCenterInfo({}).then(res => {
    // å¤„ç†é‡‘é¢æ•°æ®ä¸ºæ•´æ•°
    const data = res.data;
    if (data) {
      if (data.balance !== undefined) data.balance = Math.floor(data.balance);
      if (data.bsb_coin !== undefined) data.bsb_coin = Math.floor(data.bsb_coin);
      if (data.totalMoney !== undefined) data.totalMoney = Math.floor(data.totalMoney);
      if (data.sy !== undefined) data.sy = Math.floor(data.sy);
      if (data.backWater !== undefined) data.backWater = Math.floor(data.backWater);
      if (data.totalSy !== undefined) data.totalSy = Math.floor(data.totalSy);
    }
    this.info = data;
  });
},
```

---

## ä¸‰ã€â­ åç«¯èŠå¤©æ¶ˆæ¯ç”Ÿæˆä¿®æ”¹ (CommonQueue.php)

è¿™æ˜¯**æœ€é‡è¦**çš„ä¿®æ”¹ï¼Œè§£å†³äº†èŠå¤©å®¤ä¸­è‡ªåŠ¨å‘é€çš„"ç©å®¶åˆ†æ•°æŠ¥å‘Š"å’Œ"ä¸­å¥–åå•"æ¶ˆæ¯æ˜¾ç¤ºå°æ•°çš„é—®é¢˜ã€‚

### 1. ç©å®¶åˆ†æ•°æŠ¥å‘Šæ¶ˆæ¯ï¼ˆç¬¬532-550è¡Œï¼‰

```php
// ç©å®¶ç»“ç®—åçš„ç§¯åˆ†æ˜¾ç¤º
if($roomConfig['betUserCreditOnly'] == 1){
    // åªæ˜¾ç¤ºä¸‹æ³¨ç”¨æˆ·çš„è´¦å•
    $validUsers = [];
    foreach ($utmp as $uid=>$u){
        $balance = floor(isset($result[$uid]) ? $result[$uid] : 0); // âœ… æ”¹ä¸º floor()
        if($balance >= $roomConfig['lowScoreNoBillMessage']){
            $validUsers[] = $u['name'] . " " . $balance;
        }
    }
    $tmp_msg = implode("<br>", $validUsers);
}else{
    // æ˜¾ç¤ºæ‰€æœ‰ç§¯åˆ†>=é˜ˆå€¼çš„ç”¨æˆ·è´¦å•
    $ulist = User::where([...])->get()->toArray();
    $validUsers = [];
    foreach ($ulist as $u){
        $kmoney = floor($u['kmoney']); // âœ… æ”¹ä¸º floor()
        $validUsers[] = $u['name'] . " " . $kmoney;
    }
    $tmp_msg = implode("<br>", $validUsers);
}
```

**ä¿®æ”¹è¯´æ˜**ï¼š
- åŸä»£ç ä½¿ç”¨ `ComFunc::pr2()` ä¿ç•™2ä½å°æ•°
- ä¿®æ”¹ä¸º `floor()` å‘ä¸‹å–æ•´ï¼Œåªæ˜¾ç¤ºæ•´æ•°éƒ¨åˆ†
- è¿™å½±å“èŠå¤©å®¤ä¸­è‡ªåŠ¨å‘é€çš„"ç¬¬XXXé˜Ÿï¼Œç©å®¶åˆ†æ•°å¦‚ä¸‹"æ¶ˆæ¯

### 2. ä¸­å¥–åå•-ç®€å•æ¨¡å¼ï¼ˆç¬¬437-453è¡Œï¼‰

```php
// å¤„ç†{ç»“ç®—-ç®€å•æ¨¡å¼}å‚æ•°
if (strpos($msg_content, '{ç»“ç®—-ç®€å•æ¨¡å¼}') !== false) {
    $simple_settlement_msg = "";
    $x = 0;
    foreach ($utmp as $uid=>$u){
        $u['zyk'] = floor($u['zyk']); // âœ… æ”¹ä¸º floor()
        // è·å–ç”¨æˆ·å½“å‰ä½™é¢ï¼ˆç»“ç®—åçš„ä½™é¢ï¼‰
        $currentBalance = floor(isset($result[$uid]) ? $result[$uid] : 0); // âœ… æ”¹ä¸º floor()
        // æœ¬æœŸå®é™…ç›ˆäºå°±æ˜¯è¾“èµ¢é‡‘é¢
        $actualProfit = $u['zyk'];
        
        $simple_settlement_msg .= "{$u['name']}[{$currentBalance}] {$actualProfit}";
        if ($x != count($utmp)-1) {
            $simple_settlement_msg .= "<br>";
        }
        $x++;
    }
    $msg_content = str_replace("{ç»“ç®—-ç®€å•æ¨¡å¼}", $simple_settlement_msg, $msg_content);
}
```

### 3. ä¸­å¥–åå•-è¯¦ç»†æ¨¡å¼ï¼ˆç¬¬462-486è¡Œï¼‰

```php
if($roomConfig['orderSummaryDisplay'] == 0){
    $x = 0;count($utmp) > 0 ? $tmp_msg = "<empty><br>" : $tmp_msg = '';
    foreach ($utmp as $uid=>$u){
        $u['zyk'] = floor($u['zyk']); // âœ… æ”¹ä¸º floor()
        $ykcolor = $u['zyk'] > 0 ? '#00d123' : ($u['zyk'] < 0 ? '#fe0101' : '');
        $tmp_msg .= "[{$u['name']}]&nbsp;å¾—åˆ†:<span style='color:{$ykcolor}'>{$u['zyk']}</span><br>";
        foreach ($u['orders'] as $sname=>$cons){
            $tmp_msg .= $sname."[";
            foreach ($cons as $c){
                $yk = floor($c['yk']); // âœ… æ”¹ä¸º floor()
                // ... é¢œè‰²å¤„ç† ...
                if($c != end($cons)){
                    $tmp_msg .= $c['play'].'/'.(floor($c['je'])).'/'.$yk.'&nbsp;'; // âœ… æ”¹ä¸º floor()
                }else{
                    $tmp_msg .= $c['play'].'/'.floor($c['je']).'/'.$yk; // âœ… æ”¹ä¸º floor()
                }
            }
            $tmp_msg .= "]<br>";
        }
        // ...
    }
    // ...
}
```

### 4. ä¸­å¥–åå•-ç®€åŒ–æ¨¡å¼ï¼ˆç¬¬487-505è¡Œï¼‰

```php
else{//è®¢å•å†…å®¹ç®€åŒ–
    $orderlist = [];
    $marr = explode("{ç»“ç®—}",$msg_content);
    $msgarr = [];
    // ...
    foreach ($utmp as $uid=>$u){
        $u['zyk'] = floor($u['zyk']); // âœ… æ”¹ä¸º floor()
        $ykcolor = $u['zyk'] > 0 ? '#00d123' : ($u['zyk'] < 0 ? '#fe0101' : '');
        $orderlist[$uid] = [];
        foreach ($u['orders'] as $sname=>$cons){
            foreach ($cons as $c){
                $orderlist[$uid][] = [
                    'b'=>$sname,
                    'p'=>$c['play'],
                    'a'=>floor($c['je']),  // âœ… æ”¹ä¸º floor()
                    'y'=>floor($c['yk'])   // âœ… æ”¹ä¸º floor()
                ];
            }
        }
        $tmp = ['otype'=>'settle','ctype'=>'html','con'=>"<p>[{$u['name']}]&nbsp;å¾—åˆ†:<span style='color:{$ykcolor}'>{$u['zyk']}&nbsp;&nbsp;</span></p>",'uid'=>$uid];
        array_push($msgarr,$tmp);
    }
}
```

**ä¿®æ”¹è¯´æ˜**ï¼š
- `$u['zyk']` - ç”¨æˆ·ç›ˆäº
- `$c['yk']` - å•ä¸ªæ³¨å•ç›ˆäº
- `$c['je']` - å•ä¸ªæ³¨å•é‡‘é¢
- `$currentBalance` - ç”¨æˆ·å½“å‰ä½™é¢
- `$u['kmoney']` - ç”¨æˆ·è´¦æˆ·ä½™é¢

æ‰€æœ‰è¿™äº›é‡‘é¢éƒ½ä» `ComFunc::pr2()` (ä¿ç•™2ä½å°æ•°) æ”¹ä¸º `floor()` (å‘ä¸‹å–æ•´)ã€‚

---

## ä¿®æ”¹ç‰¹ç‚¹

1. **ä¸‰å±‚ä¿éšœ**ï¼š
   - å‰ç«¯æ¨¡æ¿å±‚ä½¿ç”¨ `Math.floor()` æ˜¾ç¤º
   - å‰ç«¯æ•°æ®åŠ è½½æ—¶è¿›è¡Œæ•´æ•°å¤„ç†
   - **åç«¯ç”Ÿæˆæ¶ˆæ¯æ—¶å°±ä½¿ç”¨æ•´æ•°** â­ æœ€æ ¹æœ¬çš„è§£å†³æ–¹æ¡ˆ

2. **æ— å‰¯ä½œç”¨**ï¼šä¸å½±å“æ•°æ®åº“å­˜å‚¨å’Œåå°è®¡ç®—é€»è¾‘

3. **å®Œæ•´è¦†ç›–**ï¼š
   - âœ… å‰ç«¯é¡µé¢çš„æ‰€æœ‰é‡‘é¢æ˜¾ç¤º
   - âœ… èŠå¤©å®¤ä¸­çš„ç©å®¶åˆ†æ•°æŠ¥å‘Šæ¶ˆæ¯
   - âœ… èŠå¤©å®¤ä¸­çš„ä¸­å¥–åå•æ¶ˆæ¯
   - âœ… è®¢å•è¯¦æƒ…å¼¹çª—
   - âœ… åœ¨çº¿ç”¨æˆ·åˆ—è¡¨
   - âœ… æˆ¿ä¸»ç®¡ç†ä¸­å¿ƒ

4. **å†å²æ•°æ®**ï¼š
   - å‰ç«¯ï¼šé€šè¿‡æ•°æ®åŠ è½½æ—¶å¤„ç†ï¼Œç¡®ä¿å†å²è®°å½•æ˜¾ç¤ºä¸ºæ•´æ•°
   - åç«¯ï¼šæ–°ç”Ÿæˆçš„æ¶ˆæ¯éƒ½æ˜¯æ•´æ•°ï¼Œæ—§æ¶ˆæ¯å·²ç»ä¿å­˜åœ¨æ•°æ®åº“ä¸­

---

## æ³¨æ„äº‹é¡¹

### 1. å–æ•´æ–¹å¼
- **å‰ç«¯**ï¼šä½¿ç”¨ `Math.floor()` å‘ä¸‹å–æ•´
- **åç«¯**ï¼šä½¿ç”¨ `floor()` å‘ä¸‹å–æ•´
- ç¤ºä¾‹ï¼š
  - 123.56 â†’ 123
  - -45.67 â†’ -45

### 2. è®¡ç®—ä¸å˜
åå°è®¡ç®—ï¼ˆç»“ç®—ã€ç»Ÿè®¡ï¼‰ä»ç„¶ä½¿ç”¨å®Œæ•´çš„å°æ•°å€¼ï¼Œåªæ˜¯åœ¨æ˜¾ç¤ºæ—¶å»æ‰å°æ•°éƒ¨åˆ†ã€‚

### 3. æ—§æ¶ˆæ¯
æ•°æ®åº“ä¸­å·²ä¿å­˜çš„å†å²èŠå¤©æ¶ˆæ¯ä»ç„¶ä¼šæ˜¾ç¤ºå°æ•°ï¼Œå› ä¸ºé‚£äº›æ˜¯å·²ç»ç”Ÿæˆçš„HTMLå†…å®¹ã€‚åªæœ‰æ–°å¼€å¥–åç”Ÿæˆçš„æ¶ˆæ¯æ‰ä¼šæ˜¾ç¤ºæ•´æ•°ã€‚

---

## æµ‹è¯•æ­¥éª¤

### 1. æ¸…é™¤å‰ç«¯ç¼“å­˜
```bash
1. å®Œå…¨å…³é—­ HBuilderX
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+Deleteï¼‰
3. æ¸…é™¤åº”ç”¨ç¨‹åºå­˜å‚¨ï¼ˆF12 â†’ Application â†’ Clear site dataï¼‰
4. æ¸…é™¤æœ¬åœ°å­˜å‚¨ï¼ˆæ§åˆ¶å°ï¼šlocalStorage.clear(); sessionStorage.clear();ï¼‰
```

### 2. é‡å¯é¡¹ç›®
```bash
1. é‡æ–°å¯åŠ¨ HBuilderX
2. é‡æ–°è¿è¡Œé¡¹ç›®åˆ°æµè§ˆå™¨
3. å¼ºåˆ¶åˆ·æ–°é¡µé¢ï¼ˆCtrl+Shift+Rï¼‰
```

### 3. ç­‰å¾…æ–°å¼€å¥–
**é‡è¦**ï¼šåç«¯æ¶ˆæ¯ä¿®æ”¹éœ€è¦ç­‰å¾…**ä¸‹ä¸€æ¬¡å¼€å¥–**æ‰èƒ½çœ‹åˆ°æ•ˆæœï¼

å› ä¸ºèŠå¤©æ¶ˆæ¯æ˜¯åœ¨å¼€å¥–ç»“ç®—æ—¶ç”±åç«¯è‡ªåŠ¨ç”Ÿæˆå¹¶å‘é€çš„ï¼Œå·²ç»ç”Ÿæˆçš„å†å²æ¶ˆæ¯æ— æ³•ä¿®æ”¹ã€‚

### 4. æµ‹è¯•æ£€æŸ¥ç‚¹

#### ä¼šå‘˜è´¦å·æµ‹è¯•
- âœ… è®¿é—® `http://localhost:8080/#/copage/chat`
- âœ… æ£€æŸ¥é¡¶éƒ¨ä½™é¢ã€è¾“èµ¢ã€æµæ°´ã€é€€æ°´æ˜¾ç¤ºï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰
- âœ… ç‚¹å‡»"æ³¨å•"æŒ‰é’®ï¼ŒæŸ¥çœ‹å†å²æ³¨å•é‡‘é¢ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰
- âœ… **ç­‰å¾…æ–°å¼€å¥–**ï¼ŒæŸ¥çœ‹è‡ªåŠ¨å‘é€çš„"ç©å®¶åˆ†æ•°"æ¶ˆæ¯ï¼ˆéœ€è¦æ–°å¼€å¥–ï¼‰
- âœ… **ç­‰å¾…æ–°å¼€å¥–**ï¼ŒæŸ¥çœ‹è‡ªåŠ¨å‘é€çš„"ä¸­å¥–åå•"æ¶ˆæ¯ï¼ˆéœ€è¦æ–°å¼€å¥–ï¼‰

#### æˆ¿ä¸»è´¦å·æµ‹è¯•
- âœ… èŠå¤©å®¤ï¼ˆåŒä¼šå‘˜æµ‹è¯•ï¼‰
- âœ… ç‚¹å‡»"åœ¨çº¿"æŒ‰é’®ï¼ŒæŸ¥çœ‹åœ¨çº¿ç”¨æˆ·ä½™é¢ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰
- âœ… è®¿é—® `http://localhost:8080/#/agent/manage/center`
- âœ… æ£€æŸ¥ç®¡ç†ä¸­å¿ƒçš„æ‰€æœ‰ç»Ÿè®¡æ•°æ®ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰

---

## å¿«é€ŸéªŒè¯æ–¹æ³•

### å‰ç«¯éªŒè¯ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰
æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œæ‰§è¡Œï¼š
```javascript
// æµ‹è¯• Math.floor() å‡½æ•°
console.log('æµ‹è¯•æ•´æ•°æ˜¾ç¤º:', Math.floor(123.456)); // åº”è¾“å‡º: 123

// æ£€æŸ¥é¡µé¢ä½™é¢æ˜¾ç¤º
document.querySelectorAll('.text2.span1').forEach(el => {
  console.log('ä½™é¢æ˜¾ç¤º:', el.innerText);
});
```

### åç«¯éªŒè¯ï¼ˆéœ€è¦æ–°å¼€å¥–ï¼‰
1. ç­‰å¾…å°æ¹¾å®¾æœæ–°å¼€å¥–
2. è§‚å¯ŸèŠå¤©å®¤ä¸­è‡ªåŠ¨å‘é€çš„æ¶ˆæ¯ï¼š
   ```
   ç¬¬XXXé˜Ÿ
   ----ç©å®¶åˆ†æ•°å¦‚ä¸‹----
   ç†Šå¤§ 218257      â† åº”è¯¥æ˜¯æ•´æ•°
   éŸ©è‹ä¿ 150952    â† åº”è¯¥æ˜¯æ•´æ•°
   ç‚¹ç‚¹ 1087        â† åº”è¯¥æ˜¯æ•´æ•°
   ```

---

## é—®é¢˜æ’æŸ¥

### å¦‚æœå‰ç«¯è¿˜æ˜¯æ˜¾ç¤ºå°æ•°
1. ç¡®è®¤å·²æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. å°è¯•æ— ç—•æ¨¡å¼/éšç§æ¨¡å¼
3. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰JavaScripté”™è¯¯

### å¦‚æœèŠå¤©æ¶ˆæ¯è¿˜æ˜¯æ˜¾ç¤ºå°æ•°
1. ç¡®è®¤å·²ä¿®æ”¹ `CommonQueue.php` æ–‡ä»¶
2. ç¡®è®¤åç«¯ä»£ç å·²é‡æ–°åŠ è½½ï¼ˆå¯èƒ½éœ€è¦é‡å¯ PHP-FPM æˆ– Swooleï¼‰
3. **ç­‰å¾…æ–°å¼€å¥–**ï¼Œæ—§æ¶ˆæ¯æ— æ³•ä¿®æ”¹

### é‡å¯åç«¯æœåŠ¡ï¼ˆå¦‚æœä½¿ç”¨ Swooleï¼‰
```bash
# æŸ¥æ‰¾ Swoole è¿›ç¨‹
ps aux | grep swoole

# é‡å¯ Swooleï¼ˆæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´å‘½ä»¤ï¼‰
# å¦‚æœæ˜¯ä½¿ç”¨ systemd ç®¡ç†
systemctl restart swoole-service

# æˆ–è€…æ€æ­»è¿›ç¨‹é‡æ–°å¯åŠ¨
kill -9 <è¿›ç¨‹ID>
php artisan swoole:start
```

---

## æ€»ç»“

æœ¬æ¬¡ä¿®æ”¹æ¶µç›–äº†**å‰ç«¯æ˜¾ç¤º**ã€**å‰ç«¯æ•°æ®å¤„ç†**å’Œ**åç«¯æ¶ˆæ¯ç”Ÿæˆ**ä¸‰ä¸ªå±‚é¢ï¼Œç¡®ä¿å°æ¹¾å®¾æœèŠå¤©å®¤ä¸­çš„æ‰€æœ‰é‡‘é¢éƒ½æ˜¾ç¤ºä¸ºæ•´æ•°ã€‚

å…³é”®ç‚¹ï¼š
- âœ… å‰ç«¯ç«‹å³ç”Ÿæ•ˆï¼ˆæ¸…é™¤ç¼“å­˜åï¼‰
- â° åç«¯æ¶ˆæ¯éœ€è¦ç­‰å¾…æ–°å¼€å¥–æ‰èƒ½çœ‹åˆ°æ•ˆæœ
- ğŸ’¾ æ•°æ®åº“å­˜å‚¨å’Œè®¡ç®—é€»è¾‘ä¿æŒä¸å˜
